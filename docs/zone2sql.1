.TH "ZONE2SQL" "1" "December 2002" "" ""
.SH NAME
.PP
\f[B]zone2sql\f[] \- convert BIND zones to SQL
.SH SYNOPSIS
.PP
\f[B]zone2sql\f[]
{\f[B]\-\-named\-conf=\f[]\f[I]PATH\f[],\f[B]\-\-zone\-file=\f[]\f[I]PATH\f[]
[\f[B]\-\-zone\-name=\f[]\f[I]NAME\f[]]} [\f[I]OPTIONS\f[]]
.SH DESCRIPTION
.PP
\f[B]zone2sql\f[] parses Bind named.conf files and zonefiles and outputs
SQL on standard out, which can then be fed to your database.
.PP
\f[B]zone2sql\f[] understands the Bind master file extension
\f[C]$GENERATE\f[] and will also honour \f[C]$ORIGIN\f[] and
\f[C]$TTL\f[].
.PP
For backends supporting slave operation there is also an option to keep
slave zones as slaves, and not convert them to native operation.
.PP
\f[B]zone2sql\f[] can generate SQL for the Generic MySQL, Generic
PostgreSQL, Generic SQLite3 and Generic Oracle backends.
.SH OPTIONS
.SS INPUT OPTIONS
.TP
.B \-\-named\-conf=\f[I]PATH\f[]
Read \f[I]PATH\f[] to get the bind configuration
.RS
.RE
.TP
.B \-\-zone=\f[I]PATH\f[]
Parse only the zone file at \f[I]PATH\f[] Conflicts with
\f[B]\-\-named\-conf\f[] parameter.
.RS
.RE
.TP
.B \-\-zone\-name=\f[I]NAME\f[]
When parsing a single zone without $ORIGIN statement, set \f[I]ZONE\f[]
as the zone name.
.RS
.RE
.SS BACKENDS
.TP
.B \-\-gmysql
Output in format suitable for the default configuration of the Generic
MySQL backend.
.RS
.RE
.TP
.B \-\-gpgsql
Output in format suitable for the default configuration of the Generic
PostgreSQL backend.
.RS
.RE
.TP
.B \-\-gsqlite
Output in format suitable for the default configuration of the Generic
SQLite3 backend.
.RS
.RE
.TP
.B \-\-goracle
Output in format suitable for the default configuration of the Generic
Oracle backend.
.RS
.RE
.TP
.B \-\-mydns
Output in a format suitable for the MyDNS backend.
.RS
.RE
.TP
.B \-\-oracle
Output in format suitable for the default configuration of the Oracle
backend.
.RS
.RE
.SS OUTPUT OPTIONS
.TP
.B \-\-json\-comments
Parse JSON in zonefile comments to set the \[aq]disabled\[aq] and
\[aq]comment\[aq] fields in the database.
See \f[I]JSON COMMENTS\f[] for more information.
.RS
.RE
.TP
.B \-\-transactions
If the target SQL backend supports transactions, wrap every domain into
a transaction for integrity and possibly higher speed.
.RS
.RE
.SS OTHER OPTIONS
.TP
.B \-\-filter\-duplicate\-soa
If there\[aq]s more than one SOA record in the zone (possibly because it
was AXFR\[aq]d), ignore it.
If this option is not set, all SOA records in the zone are emitted.
.RS
.RE
.TP
.B \-\-help
List all options
.RS
.RE
.TP
.B \-\-on\-error\-resume\-next
Ignore missing zone files during parsing.
Dangerous.
.RS
.RE
.TP
.B \-\-slave
Maintain slave status of zones listed in named.conf as being slaves.
The default behaviour is to convert all zones to native operation.
.RS
.RE
.TP
.B \-\-verbose
Be verbose during conversion.
.RS
.RE
.SH JSON COMMENTS
.PP
The Generic SQL backends have the \[aq]comment\[aq] and
\[aq]disabled\[aq] fields in the \[aq]records\[aq] table.
The \[aq]comment\[aq] field contains a comment for this record (if any)
and the \[aq]disabled\[aq] field tells PowerDNS if the record can be
served to clients.
.PP
When a zonefile contains a comment like
\f[C];\ json={"comment":\ "Something",\ "disabled":\ true}\f[] and
\f[B]\-\-json\-comments\f[] is provided, the \[aq]comment\[aq] field
will contain "Something" and the \[aq]disabled\[aq] field will be set to
the database\[aq]s native true value.
.PP
WARNING: Using JSON comments to disable records means that the zone in
PowerDNS is different from the one served by BIND, as BIND does not
handle the disabled status in the comment.
.SH SEE ALSO
.PP
pdns_server(1)
.SH AUTHORS
PowerDNS.
